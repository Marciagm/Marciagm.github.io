<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0"" />
    <title>test</title>
    <style>
        body {
            width: 100%;
            /*overflow: hidden;*/
            background: url(images/christamas/bg.png);
            background-size: 100%;
            /*width: 100%;*/
        }
        .cloud {
            width: 4348.5px;
            position: absolute;
            top: 0;
            left: 0;
        }
        .barrier {
            position: absolute;
            left: 0;
            z-index: 0;
            width: 5138px;/*
            height: 445px;*/
            /*-webkit-animation: move 40s;
            -webkit-animation-timing-function: linear;*/
        }
        .santa {
            width: 103.5px;
            position: absolute;
            left: 1%;
            top: 60%;
            z-index: 1;
        }
        @keyframes move {
            from {left: 0}
            to {left: -5138px}
        }
    </style>
    <script>
        
    </script>
</head>
<body>
    <div id="con">
        <img src="images/christamas/cloud.png" class="cloud" id="cloud" />
        <img id="barrier" class="barrier" src="images/christamas/barrier.png"/>
        <img id="santa" class="santa" src="images/christamas/santa.gif">    
    </div>
    <script
  src="http://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>
    <script>
        let left = 0;
        let cloudLeft = 0;
        let stop = false;
        let timer;
        function move () {
            timer = setInterval(function () {
                const barrierLeft = $('#barrier').position().left;
                console.log(barrierLeft);
                if (barrierLeft <= -5138) {
                    alert('yyy: congratulations!');
                    $('#santa').animate({
                        top: '20%'
                    })
                    clearInterval(timer);
                    timer = null;
                    return;
                }
                left = left - 200;
                $('#barrier').animate({
                    left: left +  'px'
                }, 'slow')
                cloudLeft = cloudLeft - 100;
                $('#cloud').animate({
                    left: cloudLeft + 'px'
                }, 'slow')
            }, 500)
        }
        $(document).ready(function () {
            $('body').on('touchstart', function (event) {
                event.preventDefault();
                move();
            })
            $('body').on('touchend', function () {
                clearInterval(timer);
                timer = null;
            })
            $('body').on('touchmove', function () {
                clearInterval(timer);
                timer = null;
            })
            $('body').on('click', function (event) {
                event.preventDefault();
                if ($('#barrier').position().left <= -5138) {
                    alert('yyy: congratulations!');
                    $('#santa').animate({
                        top: '20%'
                    })
                    clearInterval(timer);
                    timer = null;
                    return;
                }
                $('#santa').animate({
                    top: '50%'
                }).animate({
                    top: '60%'
                })
                left = left - 150;
                $('#barrier').animate({
                    left: left +  'px'
                }, 'slow')
                cloudLeft = cloudLeft - 100;
                $('#cloud').animate({
                    left: cloudLeft + 'px'
                }, 'slow')
            })
        })
    </script>
</body>
</html>